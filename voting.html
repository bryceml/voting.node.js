<html>

<head>
  <style>
* {
  font-size: 20px;
  color: #222;
  font-family: arial,sans-serif;
}
  </style>
  <title>City Finder</title>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

</head>

<body>
  <h1 id="vimusers">Vote for your favorite text editor below</h1>
  <h1 id="emacsusers"></h1>
  <input id="vimbutton" type="button" value="I like Vim!">
  <input id="emacsbutton" type="button" value="I like Emacs!">
  <!--<form> Enter A Utah City:
    <input type="text" id="cityfield" value="">
    <br> Suggestion:
    <span id="txtHint">Empty</span>
    <input id="button" type="submit" value="Submit"> </form>
  <p>City</p>
  <textarea id="dispcity">No City</textarea>
  <p>Current Weather</p>
  <div id="weather">No weather</div>
</form>-->
</body>
<script>
$("#vimbutton").click( function(e) {
    e.preventDefault();
$.getJSON("vim" , function(data) {
  $("#vimusers").html("Votes for Vim: " + data.vim);
$("#emacsusers").html("Votes for Emacs: " + data.emacs);
});
});
$("#emacsbutton").click( function(e) {
    e.preventDefault();
$.getJSON("emacs" , function(data) {
  $("#emacsusers").html("Votes for Emacs: " + data.emacs);
  $("#vimusers").html("Votes for Vim: " + data.vim);
});
});
$(document).ready(setInterval(function(){
$.getJSON("query" , function(data) {
  $("#emacsusers").html("Votes for Emacs: " + data.emacs);
  $("#vimusers").html("Votes for Vim: " + data.vim);
});
},1000));

/*
  $("#cityfield").keyup(function() {
    $.getJSON("getcity?q=" + $("#cityfield").val(), function(data) {
        var everything = "<ul>";
        $.each(data, function(i, item) {
          everything += "<li> " + data[i].city + "</li>";
        });
        everything += "</ul>";
        $("#txtHint").html(everything);
      })
      .done(function() {
        console.log('getJSON request succeeded!');
      })
      .fail(function(jqXHR, textStatus, errorThrown) {
        console.log('getJSON request failed! ' + textStatus);
        conlose.log("incoming " + jqXHR.responseText);
      })
      .always(function() {
        console.log('getJSON request ended!');
      })
      .complete(function() {
        console.log("complete");
      });
  });
  $("#button").click(function(e) {
    var value = $("#cityfield").val();
    console.log(value);
    e.preventDefault();
    $("#dispcity").text(value);
    var myurl = "https://api.wunderground.com/api/79b56d882614a97f/geolookup/conditions/q/UT/";
    myurl += value;
    myurl += ".json";
    console.log(myurl);
    $.ajax({
      url: myurl,
      dataType: "jsonp",
      success: function(parsed_json) {
        var location = parsed_json['location']['city'];
        var temp_string = parsed_json['current_observation']['temperature_string'];
        var current_weather = parsed_json['current_observation']['weather'];
        var pic = parsed_json['current_observation']['image']['url'];
        var observation_location = parsed_json['current_observation']['observation_location']['full'];
        var humidity = parsed_json['current_observation']['relative_humidity'];
        var wind_mph = parsed_json['current_observation']['wind_mph'];
        var wind_dir = parsed_json['current_observation']['wind_dir'];
        everything = "<ul>";
        everything += "<li>Location: " + location;
        everything += "<li>Observation Location: " + observation_location;
        everything += "<li>Temperature: " + temp_string;
        everything += "<li>Humidity: " + humidity;
        everything += "<li>Wind Speed: " + wind_mph + " MPH";
        everything += "<li>Wind Direction: " + wind_dir;
        everything += "<li>Weather: " + current_weather;
        everything += "</ul>";
        everything += "<img src=\"" + pic + "\">";
        $("#weather").html(everything);
      }
    });
  });*/
</script>

</html>
